<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="assets/bootstrap/css/bootstrap.css" rel="stylesheet">

    <title>AbÃ³bora</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background-color: rgb(191, 213, 255);
            overflow: hidden;
            position: relative;
        }

        .background-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .contador {
            font-size: 45px;
        }

        .falling-pumpkin {
            position: absolute;
            top: -200px;
            transition: top 2s linear;
        }

        .fallen-pumpkin {
            position: absolute;
            transition: none;
        }
    </style>
</head>

<body class="d-flex justify-content-center align-items-center">

    <div class="background-container" id="background-container"></div>

    <div class="d-flex flex-column align-items-center">

        <div class="row text-center contador shadow-lg p-3 pt-4 mb-5 bg-white rounded mx-auto">
            <p>ðŸŽƒ</p>
            <p id="count" style="color: black;">0</p>
        </div>

        <div>
            <img src="https://f.feridinha.com/2Xf1X.png" height="200px" onclick="Increment()">
        </div>

        <div class="row pt-4">
            <button type="button" class="btn btn-primary" onclick="Reset()">
                Resetar abÃ³boras
                <img src="assets/img/white-reset.png" alt="" height="20px">
            </button>
        </div>

    </div>

    <script>
        var pumpkinCount = 0; // To keep track of the number of pumpkins

        function Increment() {
            var contador = document.getElementById('count');
            var newValue = parseInt(contador.textContent) + 1;
            contador.textContent = newValue;
            console.log(contador, newValue);

            createFallingPumpkin();
        }

        function Reset() {
            var contador = document.getElementById('count');
            contador.textContent = '0';
            pumpkinCount = 0; // Reset the pumpkin count
            // Remove all existing pumpkins
            var pumpkins = document.querySelectorAll('.fallen-pumpkin');
            pumpkins.forEach(function(pumpkin) {
                pumpkin.remove();
            });
        }

        function createFallingPumpkin() {
            var pumpkin = document.createElement('img');
            pumpkin.src = 'https://f.feridinha.com/2Xf1X.png';
            pumpkin.height = 50;
            pumpkin.className = 'falling-pumpkin';
            
            // Set random horizontal position
            pumpkin.style.left = Math.random() * (window.innerWidth - pumpkin.height) + 'px';
            
            document.getElementById('background-container').appendChild(pumpkin);

            // Trigger the fall animation
            var pxToStop = Math.random() * window.innerHeight;
            setTimeout(function() {
                pumpkin.style.top = pxToStop + 'px';
            }, 100);

            // After the fall, change class and update the position to stack
            pumpkin.addEventListener('transitionend', function() {
                pumpkin.className = 'fallen-pumpkin';
                pumpkin.style.top = pxToStop + 'px';
                pumpkin.style.bottom = (window.innerHeight - pxToStop) + 'px';
                pumpkinCount++;
            });
        }
    </script>

</body>

</html>
